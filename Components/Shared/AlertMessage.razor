@namespace better_call_saul.Components.Shared
@using better_call_saul.Models
@using AlertMessageModel = better_call_saul.Models.AlertMessage

@if (AlertModel != null)
{
    <div class="alert @GetAlertClass() alert-dismissible fade show" role="alert">
        @if (AlertModel != null && !string.IsNullOrEmpty(AlertModel.Message))
        {
            <strong>@GetAlertTitle()</strong> @AlertModel.Message
        }
        @if (AlertModel != null && AlertModel.Dismissible)
        {
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" @onclick="Dismiss"></button>
        }
    </div>
}

@code {
    [Parameter]
    public AlertMessageModel? AlertModel { get; set; }

    [Parameter]
    public EventCallback OnDismiss { get; set; }

    private string GetAlertClass()
    {
        return AlertModel?.Type switch
        {
            AlertType.Success => "alert-success",
            AlertType.Warning => "alert-warning",
            AlertType.Error => "alert-danger",
            AlertType.Info => "alert-info",
            _ => "alert-info"
        };
    }

    private string GetAlertTitle()
    {
        return AlertModel?.Type switch
        {
            AlertType.Success => "Success!",
            AlertType.Warning => "Warning: ",
            AlertType.Error => "Error: ",
            AlertType.Info => "Info: ",
            _ => ""
        };
    }

    private void Dismiss()
    {
        OnDismiss.InvokeAsync();
    }
}